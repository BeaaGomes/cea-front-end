<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="../style/style.css">
    <title>Product</title>
</head>

<body>
    <div class="sidebar">
        <a href="home.html">Home</a>
        <a href="my-products.html">Meus produtos</a>
        <a href="create-product.html">Criar produto</a>
        <a href="my-info.html">Meus dados</a>
        <a href="index.html">Sair</a>
    </div>

    <div class="main d-flex justify-content-center">
        <div class="card">
            <div class="row">
                <div class="col"><img src="" id="product_image" style="width: 300px"></div>
                <div class="col">
                    <p class="h2" id="product_name"></p>
                    <p id="product_description"></p>
                    <p id="product_price"></p>
                </div>
            </div>
        </div>

    </div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="../scripts/utils.js"></script>
    <script src="../scripts/auth_guard.js"></script>
</body>

<script>
    let product = null
    const product_id = window.location.search.substring(1);

    $(document).ready(function() {
        fetchProduct()
    })

    function fetchProduct() {
        makeRequest("GET", `product/${product_id}`, function(response) {
            product = response
            displayProduct()
        })
    }

    function displayProduct() {
        $("#product_image").attr("src", fullImagePath(product.image));
        $("#product_name").append(product.name)
        $("#product_description").append(product.description)
        $("#product_price").append(formatPrice(product.price))

    }
</script>

</html>